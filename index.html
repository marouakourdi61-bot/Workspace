<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/style.css">
    <title>worker</title>
</head>
<body>
     <div class="container">
        <div class="box1 box">
            <p>Workspace Staff Manager</h1 >
        </div>
        <div class="box2 box">
           <h5 class="title"> Unassigned Staff</h5>
           <button id="addnewworker" class="Add">+ Add New Worker</button>

           <div id="staffList" class="staff-list"></div>


           <div id="formulaire">
  <div class="form-box">
    <h4>Ajouter un nouvel employé</h4>

    <div class="row">
      <div class="input-box">
        <label for="inp_nom">Nom complet:</label>
        <input type="text" id="inp_nom" placeholder="Entrez le nom">
      </div>

      <div class="input-box">
        <label for="inp_role">Rôle:</label>
        <select id="inp_role">
          <option value="">Choisir un rôle</option>
          <option value="Réceptionniste">Réceptionniste</option>
          <option value="Technicien IT">Technicien IT</option>
          <option value="Agent de sécurité">Agent de sécurité</option>
          <option value="Nettoyage">Nettoyage</option>
          <option value="Comptable">Comptable</option>
          <option value="RH">RH</option>
          <option value="Commercial">Commercial</option>
          <option value="Développeur">Développeur</option>
        </select>
      </div>
    </div>

    <div class="row">
  <div class="input-box" style="width: 100%;">
    <label for="inp_img">Photo (URL) :</label>
    <input type="text" id="inp_img" placeholder="Ex: https://site.com/photo.jpg">
  </div>
</div>


    <div class="row">
      <div class="input-box">
        <label for="inp_email">Email:</label>
        <input type="email" id="inp_email" placeholder="Ex: employe@work.com">
      </div>

      <div class="input-box">
        <label for="inp_tel">Téléphone:</label>
        <input type="text" id="inp_tel" placeholder="+212 6 00 00 00 00">
      </div>
    </div>

    <div class="row">
      <div class="input-box">
        <label for="inp_exp">Expériences:</label>
        <input type="text" id="inp_exp" placeholder="Ex: 2 ans en gestion">
      </div>

      <div class="input-box">
        <label for="inp_local">Localisation:</label>
        <input type="text" id="inp_local" placeholder="Ex: Casablanca">
      </div>
    </div>

    <div class="buttons">
      <button id="btnanuler" class="btn annuler">Annuler</button>
      <button id="btnajouter" class="btn ajouter">Ajouter l'employé</button>
    </div>

  </div>
</div>


<div id="fiche" class="fiches">
  <div class="fiche-box">
    <h3>Détails de l'employé</h3>
      <img id="fiche_img" class="fiche-photo" src="" alt="photo employé">
    <p><strong>Nom :</strong> <span id="fiche_nom"></span></p>
    <p><strong>Rôle :</strong> <span id="fiche_role"></span></p>
    <p><strong>Email :</strong> <span id="fiche_email"></span></p>
    <p><strong>Téléphone :</strong> <span id="fiche_tel"></span></p>
    <p><strong>Expérience :</strong> <span id="fiche_exp"></span></p>
    <p><strong>Localisation :</strong> <span id="fiche_local"></span></p>

    <button id="closeFiche" class="btn annuler">Fermer</button>
  </div>
</div>




        </div>



           
 
        


        <div class="box3 box">

    <div id="conference" class="card">
        <h3 class="salle">Salle de conférence</h3>
        <div  class="btn-add">+</div>

        <div class="assing">
        <div class="assign-box">
            <h3>Choisir un employé</h3>
            <div class="assign-list"></div>
            <button class="btn annuler closeAssign">Fermer</button>
        </div>
    </div>

    </div>

    <div id="archives" class="card">
        <h3 class="salle">Salle d'archives</h3>
        <div class="btn-add">+</div>
        <div class="assing">
        <div class="assign-box">
            <h3>Choisir un employé</h3>
            <div class="assign-list"></div>
            <button class="btn annuler closeAssign">Fermer</button>
        </div>
    </div>
    </div>

    <div id="Réception" class="card">
        <h3 class="salle">Réception</h3>
        <div  class="btn-add">+</div>
        <div class="assing">
        <div class="assign-box">
            <h3>Choisir un employé</h3>
            <div class="assign-list"></div>
            <button class="btn annuler closeAssign">Fermer</button>
        </div>
    </div>
    </div>

    <div id="personnel" class="card large">
        <h3 class="salle">Salle du personnel</h3>
        <div  class="btn-add">+</div>
        <div class="assing">
        <div class="assign-box">
            <h3>Choisir un employé</h3>
            <div class="assign-list"></div>
            <button class="btn annuler closeAssign">Fermer</button>
        </div>
    </div>
    </div>

    <div id="serveurs" class="card">
        <h3 class="salle">Salle des serveurs</h3>
        <div  class="btn-add">+</div>
        <div class="assing">
        <div class="assign-box">
            <h3>Choisir un employé</h3>
            <div class="assign-list"></div>
            <button class="btn annuler closeAssign">Fermer</button>
        </div>
    </div>
    </div>

    <div id="sécurité" class="card">
        <h3 class="salle">Salle de sécurité</h3>
        <div  class="btn-add">+</div>
        <div class="assing">
        <div class="assign-box">
            <h3>Choisir un employé</h3>
            <div class="assign-list"></div>
            <button class="btn annuler closeAssign">Fermer</button>
        </div>
    </div>
    </div>

</div>



        
     </div>
<script>
  
  const addnewworker = document.getElementById('addnewworker');
const formulaire = document.getElementById('formulaire');
const btnanuler = document.getElementById('btnanuler');
const btnajouter = document.getElementById('btnajouter');
const staffList = document.getElementById('staffList');


const assing = document.getElementById("assing");
const assignList = document.getElementById("assignList");
const closeAssign = document.getElementById("closeAssign");


const fiche = document.getElementById("fiche");
const closeFiche = document.getElementById("closeFiche");




addnewworker.addEventListener('click', () => {
  formulaire.style.display = 'flex';
});



btnanuler.addEventListener('click', () => {
  formulaire.style.display = 'none';
});



btnajouter.addEventListener('click', () => {
  let img = document.getElementById("inp_img").value;
  const nom  = document.getElementById('inp_nom').value.trim();
  const role = document.getElementById('inp_role').value.trim();
  const email  = document.getElementById('inp_email').value.trim();
  const tel    = document.getElementById('inp_tel').value.trim();
  const exp    = document.getElementById('inp_exp').value.trim();
  const local  = document.getElementById('inp_local').value.trim();

  if (!nom || !role) {
    alert("Remplir le nom et le rôle !");
    return;
  }

  const worker = document.createElement('div');
  worker.className = "worker-card";

  worker.dataset.img = img;
  worker.dataset.nom = nom;
  worker.dataset.role = role;
  worker.dataset.email = email;
  worker.dataset.tel = tel;
  worker.dataset.exp = exp;
  worker.dataset.local = local;

  worker.innerHTML = `
      
      <button class="x">x</button>
      <div>
      <p class="name" ><strong>${nom}</strong></p>
      <p class="name">${role}</p>
      </div>
      
  `;

 

worker.querySelector(".x").addEventListener("click", (e) => {
  e.stopPropagation(); 
  worker.remove();     
});

 
  

  
  worker.addEventListener('click', () => {
    document.getElementById("fiche_img").src = worker.dataset.img || "";

    document.getElementById('fiche_nom').textContent   = worker.dataset.nom;
    document.getElementById('fiche_role').textContent  = worker.dataset.role;
    document.getElementById('fiche_email').textContent = worker.dataset.email;
    document.getElementById('fiche_tel').textContent   = worker.dataset.tel;
    document.getElementById('fiche_exp').textContent   = worker.dataset.exp;
    document.getElementById('fiche_local').textContent = worker.dataset.local;

    fiche.style.display = 'flex';
  });

 



  staffList.appendChild(worker);

  
  document.querySelectorAll('#formulaire input, #formulaire select')
    .forEach(i => i.value = "");

  formulaire.style.display = 'none';

  closeFiche.addEventListener("click", () => {
    fiche.style.display = "none";
  });
});




document.querySelectorAll(".card").forEach(card => {
  const btn = card.querySelector(".btn-add");
  const assing = card.querySelector(".assing");
  const assignList = card.querySelector(".assign-list");
  const closeAssign = card.querySelector(".closeAssign");

  btn.addEventListener("click", () => {
    assignList.innerHTML = "";

    const workers = document.querySelectorAll(".worker-card");
    if(workers.length === 0){
      assignList.innerHTML = "<p>Aucun employé disponible.</p>";
    } else {
      workers.forEach(w => {


        const role = w.dataset.role;
        const salle = card.id;
        let autorise = false;


        if (role === "Manager") {
          autorise = true;
        }
        else if (role === "Réceptionniste") {
          autorise = (salle === "Réception");
        }
        else if (role === "Technicien IT") {
          autorise = (salle === "serveurs");
        }
        else if (role === "Agent de sécurité") {
          autorise = (salle === "sécurité");
        }
        else if (role === "Nettoyage") {
          autorise = (salle !== "archives");
        }
        else {
          const sallesRest = ["Réception", "serveurs", "sécurité"];
          autorise = !sallesRest.includes(salle);
        }
        if (!autorise) return;



        const div = document.createElement("div");
        div.className = "worker-option";
        div.textContent = w.dataset.nom + " - " + w.dataset.role;

        div.addEventListener("click", () => {
        const assignedWorker = document.createElement("div");
        const buttonanullworker = document.createElement("button");
        buttonanullworker.textContent = "x";
        buttonanullworker.className = "anullworker";
        assignedWorker.className = "assigned-worker";
        assignedWorker.textContent = w.dataset.nom + " - " + w.dataset.role;

        assignedWorker.appendChild(buttonanullworker);
        card.appendChild(assignedWorker);
        
            
    
        assing.style.display = "none";

  

       });


        assignList.appendChild(div);
      });
    }

    assing.style.display = "block";
  });

  closeAssign.addEventListener("click", () => {
    assing.style.display = "none";
  });










});




</script>

</body>
</html>