<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
.container {
  display: grid;
  grid-template-columns: auto auto auto;
  gap: 25px;
  background-color: gainsboro;
  padding: 10px;
}

.container .box {
  background-color: white;
  text-align: center;
  padding: 20px;
  font-size: 30px;
}
.box1 {
  grid-column: 1 / span 4;
  height: 100px;
  border-radius: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.box2{
    grid-column: 1 / span 1;
    border-radius: 10px;
    
}
.title{
    text-align: start;
}
.Add{
    width: 70%;
    height: 50px;
    background-color: rgb(44, 164, 44);
    border-radius: 15px;
    border: none;
    color: white;
}

.box3{
    grid-column:2 / span 3 ;
    border-radius: 10px;
    position: relative;
    
    
}


.box3 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 25px;
    padding: 30px;
}

#conference{
    
    background-image: url(/image/salle-conference.png);
    background-repeat: no-repeat;
    
    background-size: cover;
    
    display: flex;
    justify-content: center;
    align-items: center;
}
#archives{
  background-image: url(/image/salle-archife.png);
  background-repeat: no-repeat;
    background-size: cover;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
}

#Réception{
  background-image: url(/image/salle-reseption.png);
  background-repeat: no-repeat;
    background-size: cover;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
}

#personnel{
  background-image: url(/image/salle_de_personelle.png);
  background-repeat: no-repeat;
  
    background-size: cover;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
}
#serveurs{
  background-image: url(/image/salle_des_seveur.png);
  background-repeat: no-repeat;
   background-size: cover;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
}


#sécurité{
  background-image: url(/image/salle_de_securité.png);
    background-size: cover;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
}

.card {
    position: relative;
    border-radius: 16px;
    padding: 20px;
    height: 200px;
    color: black;
    box-shadow: 0 5px 10px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.card.large {
    grid-column: 1;
   
}


.btn-add {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #20d66b;
    width: 35px;
    height: 35px;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #002;
    border-radius: 8px;
    font-size: 25px;
    font-weight: bold;
    cursor: pointer;
}


@media (max-width: 900px) {
    .box3{
        grid-template-columns: repeat(2, 1fr);
    }
    .card.large {
        grid-column: span 2;
    }
}

@media (max-width: 600px) {
    .box3 {
        grid-template-columns: 1fr;
    }
    .card.large {
        grid-column: span 1;
    }
}







#formulaire {
    
  display: none;
  justify-content: center;
  margin-top: 20px;
}

.form-box {
    
  background: #fff;
  width: 450px;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 0 10px #ccc;
}

.row {
  display: flex;
  gap: 15px;
  margin-bottom: 15px;
}

.input-box {
  display: flex;
  flex-direction: column;
  flex: 1;
}

.input-box input,
.input-box select {
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 6px;
  margin-top: 5px;
}

.buttons {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

.btn {
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.annuler {
  background: #aaa;
}

.ajouter {
  background: #20d66b;
  color: white;
}


#staffList {
  margin-top: 15px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.worker-card {
  padding: 10px;
  background: #f2f2f2;
  border-radius: 6px;
  border: 1px solid #ddd;

  
 
  
  margin-top: 10px;
  cursor: pointer;
}

.fiches {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(4px);
  justify-content: center;
  align-items: center;
  z-index: 999;
}


.fiche-box {
  background: #ffffff;
  width: 380px;
  padding: 25px;
  border-radius: 18px;
  text-align: left;
  box-shadow: 0 10px 35px rgba(0,0,0,0.25);
  animation: fadeIn 0.25s ease-out;
  position: relative;
  font-family: "Poppins", sans-serif;
}


.fiche-box h3 {
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 22px;
  font-weight: 600;
  color: #333;
  text-align: center;
}


.fiche-box p {
  font-size: 15px;
  margin: 10px 0;
  padding: 10px;
  border-radius: 8px;
  background: #f7f7f7;
 
}


.fiche-photo {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  object-fit: cover;
  display: block;
  margin: 0 auto 15px auto;
  border: 3px solid #4a90e2;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

.btn.annuler {
  width: 100%;
  background: #e74c3c;
  color: white;
  border: none;
  padding: 12px;
  margin-top: 15px;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  transition: 0.2s ease;
}

.btn.annuler:hover {
  background: #c0392b;
}






.worker-card:hover {
  background: #ddd;
}



.assing {
  display: none;
  position: absolute;
  background: white;
  border-radius: 10px;
  padding: 15px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.3);
  z-index: 2000;
}

.assign-box {
  width: 250px;
}

.assign-list .worker-option {
  padding: 8px;
  background: #f2f2f2;
  border-radius: 6px;
  margin-top: 6px;
  cursor: pointer;
}















</style>
<body>
         <div class="container">
        <div class="box1 box">
            <p>Workspace Staff Manager</h1 >
        </div>
        <div class="box2 box">
           <h5 class="title"> Unassigned Staff</h5>
           <button id="addnewworker" class="Add">+ Add New Worker</button>

           <div id="staffList" class="staff-list"></div>


           <div id="formulaire">
  <div class="form-box">
    <h4>Ajouter un nouvel employé</h4>

    <div class="row">
      <div class="input-box">
        <label for="inp_nom">Nom complet:</label>
        <input type="text" id="inp_nom" placeholder="Entrez le nom">
      </div>

      <div class="input-box">
        <label for="inp_role">Rôle:</label>
        <select id="inp_role">
          <option value="">Choisir un rôle</option>
          <option value="Réceptionniste">Réceptionniste</option>
          <option value="Technicien IT">Technicien IT</option>
          <option value="Agent de sécurité">Agent de sécurité</option>
          <option value="Nettoyage">Nettoyage</option>
          <option value="Comptable">Comptable</option>
          <option value="RH">RH</option>
          <option value="Commercial">Commercial</option>
          <option value="Développeur">Développeur</option>
        </select>
      </div>
    </div>

    <div class="row">
  <div class="input-box" style="width: 100%;">
    <label for="inp_img">Photo (URL) :</label>
    <input type="text" id="inp_img" placeholder="Ex: https://site.com/photo.jpg">
  </div>
</div>


    <div class="row">
      <div class="input-box">
        <label for="inp_email">Email:</label>
        <input type="email" id="inp_email" placeholder="Ex: employe@work.com">
      </div>

      <div class="input-box">
        <label for="inp_tel">Téléphone:</label>
        <input type="text" id="inp_tel" placeholder="+212 6 00 00 00 00">
      </div>
    </div>

    <div class="row">
      <div class="input-box">
        <label for="inp_exp">Expériences:</label>
        <input type="text" id="inp_exp" placeholder="Ex: 2 ans en gestion">
      </div>

      <div class="input-box">
        <label for="inp_local">Localisation:</label>
        <input type="text" id="inp_local" placeholder="Ex: Casablanca">
      </div>
    </div>

    <div class="buttons">
      <button id="btnanuler" class="btn annuler">Annuler</button>
      <button id="btnajouter" class="btn ajouter">Ajouter l'employé</button>
    </div>

  </div>
</div>


<div id="fiche" class="fiches">
  <div class="fiche-box">
    <h3>Détails de l'employé</h3>
      <img id="fiche_img" class="fiche-photo" src="" alt="photo employé">
    <p><strong>Nom :</strong> <span id="fiche_nom"></span></p>
    <p><strong>Rôle :</strong> <span id="fiche_role"></span></p>
    <p><strong>Email :</strong> <span id="fiche_email"></span></p>
    <p><strong>Téléphone :</strong> <span id="fiche_tel"></span></p>
    <p><strong>Expérience :</strong> <span id="fiche_exp"></span></p>
    <p><strong>Localisation :</strong> <span id="fiche_local"></span></p>

    <button id="closeFiche" class="btn annuler">Fermer</button>
  </div>
</div>




        </div>



           
 
        


        <div class="box3 box">

    <div id="conference" class="card">

        <h3 class="salle">Salle de conférence</h3>
        <div  class="btn-add">+</div>

        <div class="assing">
        <div class="assign-box">
            <h3>Choisir un employé</h3>
            <div class="assign-list"></div>
            <button class="btn annuler closeAssign">Fermer</button>
        </div>
    </div>

    </div>

    <div id="archives" class="card">
        <h3>Salle d'archives</h3>
        <div class="btn-add">+</div>
    </div>

    <div id="Réception" class="card">
        <h3>Réception</h3>
        <div  class="btn-add">+</div>
    </div>

    <div id="personnel" class="card large">
        <h3>Salle du personnel</h3>
        <div  class="btn-add">+</div>
    </div>

    <div id="serveurs" class="card">
        <h3>Salle des serveurs</h3>
        <div  class="btn-add">+</div>
    </div>

    <div id="sécurité" class="card">
        <h3>Salle de sécurité</h3>
        <div  class="btn-add">+</div>
    </div>

</div>




        
     </div>


<script>


const addnewworker = document.getElementById('addnewworker');
const formulaire = document.getElementById('formulaire');
const btnanuler = document.getElementById('btnanuler');
const btnajouter = document.getElementById('btnajouter');
const staffList = document.getElementById('staffList');


const assing = document.getElementById("assing");
const assignList = document.getElementById("assignList");
const closeAssign = document.getElementById("closeAssign");


const fiche = document.getElementById("fiche");
const closeFiche = document.getElementById("closeFiche");




addnewworker.addEventListener('click', () => {
  formulaire.style.display = 'flex';
});



btnanuler.addEventListener('click', () => {
  formulaire.style.display = 'none';
});



btnajouter.addEventListener('click', () => {
  let img = document.getElementById("inp_img").value;
  const nom  = document.getElementById('inp_nom').value.trim();
  const role = document.getElementById('inp_role').value.trim();
  const email  = document.getElementById('inp_email').value.trim();
  const tel    = document.getElementById('inp_tel').value.trim();
  const exp    = document.getElementById('inp_exp').value.trim();
  const local  = document.getElementById('inp_local').value.trim();

  if (!nom || !role) {
    alert("Remplir le nom et le rôle !");
    return;
  }

  const worker = document.createElement('div');
  worker.className = "worker-card";


  worker.dataset.img = img;
  worker.dataset.nom = nom;
  worker.dataset.role = role;
  worker.dataset.email = email;
  worker.dataset.tel = tel;
  worker.dataset.exp = exp;
  worker.dataset.local = local;

  worker.innerHTML = `
      <p><strong>${nom}</strong></p>
      <p>${role}</p>
  `;

  
  worker.addEventListener('click', () => {
    document.getElementById("fiche_img").src = worker.dataset.img || "";

    document.getElementById('fiche_nom').textContent   = worker.dataset.nom;
    document.getElementById('fiche_role').textContent  = worker.dataset.role;
    document.getElementById('fiche_email').textContent = worker.dataset.email;
    document.getElementById('fiche_tel').textContent   = worker.dataset.tel;
    document.getElementById('fiche_exp').textContent   = worker.dataset.exp;
    document.getElementById('fiche_local').textContent = worker.dataset.local;

    fiche.style.display = 'flex';
  });

 
  staffList.appendChild(worker);

  document.querySelectorAll('#formulaire input, #formulaire select')
    .forEach(i => i.value = "");

  formulaire.style.display = 'none';
});




document.querySelectorAll(".card").forEach(card => {
  const btn = card.querySelector(".btn-add");
  const assing = card.querySelector(".assing");
  const assignList = card.querySelector(".assign-list");
  const closeAssign = card.querySelector(".closeAssign");

  btn.addEventListener("click", () => {
    assignList.innerHTML = "";

    const workers = document.querySelectorAll(".worker-card");

    if (workers.length === 0) {
      assignList.innerHTML = "<p>Aucun employé disponible.</p>";
    } 
    else 
    {
      workers.forEach(w => {

        const role = w.dataset.role;
        const salle = card.id;  // id dyal la salle

        let autorise = false;

        // === CONDITIONS D’ACCÈS ===

        if (role === "Manager") {
          autorise = true;
        }
        else if (role === "Réceptionniste") {
          autorise = (salle === "Réception");
        }
        else if (role === "Technicien IT") {
          autorise = (salle === "serveurs");
        }
        else if (role === "Agent de sécurité") {
          autorise = (salle === "sécurité");
        }
        else if (role === "Nettoyage") {
          autorise = (salle !== "archives");
        }
        else {
          // Autres rôles
          const sallesRest = ["Réception", "serveurs", "sécurité"];
          autorise = !sallesRest.includes(salle);
        }

        // ====== SI NON AUTORISÉ → MANKHLLIHCH YBAN ======
        if (!autorise) return;

        // ====== SI AUTORISÉ → YBANE F LISTE ======
        const div = document.createElement("div");
        div.className = "worker-option";
        div.textContent = w.dataset.nom + " - " + w.dataset.role;

        div.addEventListener("click", () => {
          alert(`Employé sélectionné: ${w.dataset.nom} pour ${card.querySelector('h3').textContent}`);
          assing.style.display = "none";
        });

        assignList.appendChild(div);
      });
    }

    assing.style.display = "block";
  });

  closeAssign.addEventListener("click", () => {
    assing.style.display = "none";
  });
});



</script>
</body>
</html>